<html>
    <head>
        <title></title>
	    <script type="text/javascript" src="http://www.freeridegames.com/admin/ad_supp_pack/promotion/landingPages/js/unselectable.js"></script>
	    <script type="text/javascript" src="http://www.freeridegames.com/admin/ad_supp_pack/promotion/landingPages/js/zxml.js"></script>
	    <script type="text/javascript" src="http://www.freeridegames.com/admin/ad_supp_pack/promotion/landingPages/js/gplayer_api_defines.js"></script>
	    <script type="text/javascript" src="http://www.freeridegames.com/admin/ad_supp_pack/promotion/landingPages/js/gplayer_api.js"></script>
	    <script type="text/javascript" src="http://www.freeridegames.com/admin/ad_supp_pack/promotion/landingPages/js/getXMLObject.js"></script>
	    <script type="text/javascript" src="http://www.freeridegames.com/admin/ad_supp_pack/promotion/landingPages/js/mygames.js"></script>	  
	    <script type="text/javascript" src="http://www.freeridegames.com/admin/ad_supp_pack/promotion/landingPages/js/imageCaching.js"></script>	  	  
	    <script type="text/javascript" src="http://www.freeridegames.com/admin/ad_supp_pack/promotion/landingPages/js/scrollbar.js"></script>
        <script type="text/javascript">
            var strClientSkinID = '000005';
            var strClientSkinVersion = '7.1.27.0';
            var strClientSkinVersionMask = '255.255.255.255';
            var strClientVersion = '7.2.16.3';
            var strClientVersionMask = '255.255.255.255';
            var isPlayerInstalled = GPlayerApi_IsPlayerInstalled(strClientVersion, strClientVersionMask, strClientSkinID, strClientSkinVersion, strClientSkinVersionMask);
            if (isPlayerInstalled == true) {
                var g_strActiveXVersion = '7,1,0,5';
                var strParamsForActiveX = GPlayerApi_FormatActiveXParamStr("000005", "1", "143");
                strParamsForActiveX = strParamsForActiveX + "<PARAM name='automatic_install' value='0'><PARAM name='install_url' value='http://www.freeridegames.com/downloads/exetender/Exetender.exe'><PARAM name='install_version' value='7.2.16.3;255.255.255.255'><PARAM name='install_size' value='100'><PARAM name='title' value='EXEtender Player'><PARAM name='cancel_button' value='Cancel'><PARAM name='finish_button' value='Finish'><PARAM name='Installing_string' value='Installing EXEtender Player...'><PARAM name='connecting_string' value='Connecting...'><PARAM name='downloading_string' value='Downloading...'><PARAM name='error_downloading' value='Fail to download file.'><PARAM name='error_installing' value='Fail to install.'><PARAM name='ask_user_note' value='EXEtender Player should be installed before you start playing.         Would you like to install the Player?'><PARAM name='ask_usr_title' value='EXEtender Player installation'><PARAM name='ask_user_yes' value='Yes'><PARAM name='ask_user_no' value='No'><PARAM name='ignore_ask_user' value='1'><PARAM name='player_skin_id' value='000005'><PARAM name='code_page' value='0'>";
                var strResult = GPlayerApi_LoadActiveX('' + "http://www.freeridegames.com/do/launch", "", g_strActiveXVersion, strParamsForActiveX, false);
            }
        </script>
        <script type="text/javascript">
		var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-26078036-4']);
		  _gaq.push(['_setDomainName', '.conduit.com']);
		  _gaq.push(['_trackPageview']);

		  (function() {
						var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
						ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
						var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
        <!--<script type="text/javascript" src="http://cap1dev.conduit-apps.com/Apps/FRG2.0/searchTermInfo.js"></script>
		<script type="text/javascript" src="http://cap1dev.conduit-apps.com/Apps/FRG2.0/forbiddonKewordList.js"></script>-->
        <script type="text/javascript" src="http://api.conduit.com/BrowserCompApi.js"></script>
        
        <script type="text/javascript">
            // counter
            var i = 0;

            // create object
            imageObj = new Image();

            // set image list
            images = new Array();
            images[0] = "http://storage.conduit.com/ps/frg/images/btn.png";
            images[1] = "http://storage.conduit.com/ps/frg/images/content.png";
            images[2] = "http://storage.conduit.com/ps/frg/images/bar_bg.png";
            
            // start preloading
            for (i = 0; i <= 2; i++) {
                imageObj.src = images[i];
            }
        </script>
    </head>
    <body>
        <script type="text/javascript">
            var gameId = "";
            var gameName = "";
            var gameImageUrl = "";
            var gameUrl = "";

            var gameSuggestConsts =
            {
                GOOGLE_SEARCH_PREFIX: "http://search.conduit.com",
                BING_SEARCH_PREFIX: "http://www.bing.com/",
                BING_CONDUIT_INDICATOR: "&pc=conduit"
            }

            function EBDocumentComplete(strUrl) {
                suggetFreeRideGames(strUrl);
            }

            //Callback function for the injected script.
            //If the search term is part of the group inject the script
            function EBCallBackMessageReceived(strMsg) {
                if (strMsg == "onClickPlay") {
					_gaq.push(['_trackEvent', 'General', 'Click', "FRG_V2.0"]);
				}
                else if (strMsg == "onClickClose") {
					_gaq.push(['_trackEvent', 'General', 'Close']);
                }
            }

            //Checks if the the current page is conduit search page and if the search contains key words. 
            //if so - inject script that injects the suggest bar to the game.
            function suggetFreeRideGames(strUrl) {
                strUrl = strUrl || GetMainFrameUrl();
	            if (!isConduitSearch(strUrl)) return;

	            var strSearchTerm = getSearchTerm(strUrl);
	            var checkKeywords = verifyKeywords(strSearchTerm);
				if (!checkKeywords) return;
				gameId = 1;
				//gameId = getGameIdForSearchTerm(strSearchTerm);
	            if (!gameId) return;
				
				
	            var searchProvider = getSearchProvider(strUrl);
                if (searchProvider)
	                _gaq.push(['_trackEvent', 'General', 'View', searchProvider]);

	            gameName = 'game';
	            gameImageUrl = 'http://img.exent.com/free/frg/products/' + gameId + '/boxshot_sm.jpg';
	            gameUrl = 'http://www.freeridegames.com';

	            var downloadInfo = GPlayerApi_GetDownloadInfo(gameId);
	            var isDownloaded = (downloadInfo.indexOf('FullDownloadTimeLeftSec="0"') == -1) ? false : true;
	            var strScript = 'var ebHandleGameClick = EBCallBackMessageReceived;' +
                                'var isPlayerInstalled = ' + isPlayerInstalled + ';' +
                                'isDownloaded = ' + isDownloaded + ';' + 
                                'var ebGameName = "' + gameName + '";' +
                                'var ebGameImgUrl = "' + gameImageUrl + '";' +
                                'var ebgameUrl = "' + gameUrl + '";' +
                                'var script = document.createElement("script");' +
								'script.src = "http://storage.conduit.com/ps/frg/js/injectedScript.js";' +
                                'document.getElementsByTagName("head")[0].appendChild(script);';
	            JSInjection(strScript);
	        }

            //Return true if the current search originated from conduit assests - Bing or search.conduit.com
	        function isConduitSearch(strUrl) {
	            if (strUrl.indexOf(gameSuggestConsts.GOOGLE_SEARCH_PREFIX) == 0) {
	                return true;
	            }
	            if ((strUrl.indexOf(gameSuggestConsts.BING_SEARCH_PREFIX) == 0) && (strUrl.indexOf(gameSuggestConsts.BING_CONDUIT_INDICATOR) != -1)) {
	                return true;
                }
	            return false;
	        }

	        function getSearchProvider(strUrl) {
	            if (strUrl.indexOf(gameSuggestConsts.GOOGLE_SEARCH_PREFIX) == 0) {
	                return "Google";
	            }
	            if (strUrl.indexOf(gameSuggestConsts.BING_SEARCH_PREFIX) == 0) {
	                return "Bing";
	            }
	            return "";
            }

            //Extracts the search term from the url of the search page.
	        function getSearchTerm(strUrl) {
	            try {
	                var searchTerm = strUrl.split("?")[1].split("&")[0].split("=")[1];
	                searchTerm = unescape(searchTerm.replace(/\+/g, " "));
	                return searchTerm.toLowerCase();
	            } catch (e) {
	                return "";
	            }
	        }

            // Verify wheather to show or not
			function verifyKeywords(strSearchTerm){
				
				if (((strSearchTerm.search("games") != -1) || (strSearchTerm.search("game") != -1)) && 
					(strSearchTerm.search("baby shower") == -1) && (strSearchTerm.search("bridal shower") == -1) &&
					(strSearchTerm.search("wedding shower") == -1) && (strSearchTerm.search("dora") == -1) &&
					(strSearchTerm.search("nintendo") == -1) && (strSearchTerm.search("pokemon") == -1) &&
					(strSearchTerm.search("spongebob") == -1))
						return true;
					else
						return false;
				
			
			}
			
			//return the id of the game from the key-words JSON
	        function getGameIdForSearchTerm(strSearchTerm) {
	            if (ebSearchTermJson[strSearchTerm]) {
	                return ebSearchTermJson[strSearchTerm].id;
	            }
	            return "";
	        }
			
			/*make sure it's not one of the stop list keywords
	        function getNotForbiddonSearchTerm(strSearchTerm) {
	            if (enbSearchTermJson[strSearchTerm]) {
	                return enbSearchTermJson[strSearchTerm].id;
	            }
	            return "";
	        }
	        //return the name of the game from the key-words JSON
	        function getGameNameForSearchTerm(strSearchTerm) {
	            if (ebSearchTermJson[strSearchTerm]) {
	                return ebSearchTermJson[strSearchTerm].name;
	            }
	            return "";
	        }

	        function getGameUrlForSearchTerm(strSearchTerm) {
	            if (ebSearchTermJson[strSearchTerm]) {
	                return ebSearchTermJson[strSearchTerm].url;
	            }
	            return "";
	        }
			*/
        </script>
    </body>
</html>